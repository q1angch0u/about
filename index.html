<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>羌周的个人主页</title>

  
  <meta name="author" content="q1angch0u">
  

  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="羌周的个人主页"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="羌周的个人主页" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">羌周的个人主页</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/about">关于</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2018/09/04/base64-encode-principle/"><span>BASE64编码简介</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/09/04/base64-encode-principle/" rel="bookmark">
        <time class="entry-date published" datetime="2018-09-04T11:25:35.000Z">
          2018-09-04
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h1 id="BASE64编码简介"><a href="#BASE64编码简介" class="headerlink" title="BASE64编码简介"></a>BASE64编码简介</h1><p>​</p>
<h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h3><p>BASE64是一种常用的可逆编码形式，常用于把二进制编码转换为字符形式的数据。编码后的字符串包含a-z、A-Z、0-9、+、&#x2F;，共64个字符。64个字符需要用6位来表示，从0开始表示成数字0-63。【其实共有65个字符，“&#x3D;”是填充字符，后面会说到。】</p>
<table>
   <tr>
      <td>码值</td>
      <td>字符</td>
      <td>码值</td>
      <td>字符</td>
      <td>码值</td>
      <td>字符</td>
      <td>码值</td>
      <td>字符</td>
   </tr>
   <tr>
      <td>0</td>
      <td>A</td>
      <td>16</td>
      <td>Q</td>
      <td>32</td>
      <td>g</td>
      <td>48</td>
      <td>w</td>
   </tr>
   <tr>
      <td>1</td>
      <td>B</td>
      <td>17</td>
      <td>R</td>
      <td>33</td>
      <td>h</td>
      <td>49</td>
      <td>x</td>
   </tr>
   <tr>
      <td>2</td>
      <td>C</td>
      <td>18</td>
      <td>S</td>
      <td>34</td>
      <td>i</td>
      <td>50</td>
      <td>y</td>
   </tr>
   <tr>
      <td>3</td>
      <td>D</td>
      <td>19</td>
      <td>T</td>
      <td>35</td>
      <td>j</td>
      <td>51</td>
      <td>z</td>
   </tr>
   <tr>
      <td>4</td>
      <td>E</td>
      <td>20</td>
      <td>U</td>
      <td>36</td>
      <td>k</td>
      <td>52</td>
      <td>0</td>
   </tr>
   <tr>
      <td>5</td>
      <td>F</td>
      <td>21</td>
      <td>V</td>
      <td>37</td>
      <td>l</td>
      <td>53</td>
      <td>1</td>
   </tr>
   <tr>
      <td>6</td>
      <td>G</td>
      <td>22</td>
      <td>W</td>
      <td>38</td>
      <td>m</td>
      <td>54</td>
      <td>2</td>
   </tr>
   <tr>
      <td>7</td>
      <td>H</td>
      <td>23</td>
      <td>X</td>
      <td>39</td>
      <td>n</td>
      <td>55</td>
      <td>3</td>
   </tr>
   <tr>
      <td>8</td>
      <td>I</td>
      <td>24</td>
      <td>Y</td>
      <td>40</td>
      <td>o</td>
      <td>56</td>
      <td>4</td>
   </tr>
   <tr>
      <td>9</td>
      <td>J</td>
      <td>25</td>
      <td>Z</td>
      <td>41</td>
      <td>p</td>
      <td>57</td>
      <td>5</td>
   </tr>
   <tr>
      <td>10</td>
      <td>K</td>
      <td>26</td>
      <td>a</td>
      <td>42</td>
      <td>q</td>
      <td>58</td>
      <td>6</td>
   </tr>
   <tr>
      <td>11</td>
      <td>L</td>
      <td>27</td>
      <td>b</td>
      <td>43</td>
      <td>r</td>
      <td>59</td>
      <td>7</td>
   </tr>
   <tr>
      <td>12</td>
      <td>M</td>
      <td>28</td>
      <td>c</td>
      <td>44</td>
      <td>s</td>
      <td>60</td>
      <td>8</td>
   </tr>
   <tr>
      <td>13</td>
      <td>N</td>
      <td>29</td>
      <td>d</td>
      <td>45</td>
      <td>t</td>
      <td>61</td>
      <td>9</td>
   </tr>
   <tr>
      <td>14</td>
      <td>O</td>
      <td>30</td>
      <td>e</td>
      <td>46</td>
      <td>u</td>
      <td>62</td>
      <td>+</td>
   </tr>
   <tr>
      <td>15</td>
      <td>P</td>
      <td>31</td>
      <td>f</td>
   </tr>
</table>

<p>此时，长度为3个字节的数据经过编码后就会变成4个字节。</p>
<h3 id="2-举例"><a href="#2-举例" class="headerlink" title="2. 举例"></a>2. 举例</h3><h4 id="例1-：常规情况"><a href="#例1-：常规情况" class="headerlink" title="例1 ：常规情况"></a>例1 ：常规情况</h4><p>如：字符串“QUT”经过编码后就会变成“UVVU”。</p>
<table>
   <tr>
      <td colspan=8>Q</td>
      <td colspan=8>U</td>
      <td colspan=8>T</td>
   </tr>
   <tr>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
   </tr>
   <tr>
      <td colspan=6>U</td>
      <td colspan=6>V</td>
      <td colspan=6>V</td>
      <td colspan=6>U</td>
   </tr>
</table>

<p>　　</p>
<h4 id="例2-：结果包含等号的情况"><a href="#例2-：结果包含等号的情况" class="headerlink" title="例2 ：结果包含等号的情况"></a>例2 ：结果包含等号的情况</h4><p>长度为3的字节数位数为3×8&#x3D;24，刚好可以分成6×4。但如果数据的字节数不是3的倍数，则其位数就不是6的倍数，那么需要就不能精确地划分成6位的块。此时，需在原数据后面添加1个或2个零值字节，使其字节数是3的倍数。然后，在编码后的字符串后面添加1个或2个等号“&#x3D;”，用以表示所添加的零值字节数。</p>
<p>如：字符串“QU”经过编码后就会变成“UVU&#x3D;”。</p>
<table>
   <tr>
      <td colspan=8>Q</td>
      <td colspan=8>U</td>
      <td colspan=8></td>
   </tr>
   <tr>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
   </tr>
   <tr>
      <td colspan=6>U</td>
      <td colspan=6>V</td>
      <td colspan=6>U</td>
      <td colspan=6>=</td>
   </tr>
</table>

<p>如：字符串“Q”经过编码后就会变成“UQ&#x3D;&#x3D;”。</p>
<table>
   <tr>
      <td colspan=8>Q</td>
      <td colspan=8></td>
      <td colspan=8></td>
   </tr>
   <tr>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
   </tr>
   <tr>
      <td colspan=6>U</td>
      <td colspan=6>Q</td>
      <td colspan=6>=</td>
      <td colspan=6>=</td>
   </tr>
</table>

<h3 id="3-用途"><a href="#3-用途" class="headerlink" title="3. 用途"></a>3. 用途</h3><p>BASE64加密常用于HTML内嵌Base64编码图片。</p>
<p>前端在实现页面时，对于一些简单图片，通常会选择将图片内容直接内嵌在页面中，避免不必要的外部资源加载，增大页面加载时间，但是图片数据是二进制数据，该怎么嵌入呢？绝大多数现代浏览器都支持一种名为Data URLs的特性，允许使用BASE64对图片或其他文件的二进制数据进行编码，将其作为文本字符串嵌入网页中。以百度搜索首页为例，其中语音搜索的图标是个背景图片，其内容以Data URLs形式直接写在CSS中，这个css内容又直接嵌在HTML页面。</p>
<p><img src="https://q1angch0u.oss-cn-beijing.aliyuncs.com/img/2023/08/12/20180904192600612.jpg" alt="20180904192600612"></p>
<p>Data URLs 格式为：url(data:文件类型;编码方式,编码后的文件内容)。但如果图片较大，图片的色彩层次比较丰富，则不适合使用这种方式，因为其BASE64编码后的字符串非常大，会明显增大HTML页面，影响加载速度。</p>
<p>​</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Misc/">Misc</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2018/09/04/matching-order-of-server-section-for-nginx/"><span>NGINX 中 SERVER 的匹配顺序</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/09/04/matching-order-of-server-section-for-nginx/" rel="bookmark">
        <time class="entry-date published" datetime="2018-09-04T11:18:57.000Z">
          2018-09-04
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>在开始处理一个http请求时，nginx会取出header头中的host，与nginx.conf中每个server的server_name进行匹配，以此决定到底由哪一个server块来处理这个请求。</p>
<p>server_name与host匹配优先级如下：</p>
<ol>
<li>完全匹配</li>
<li>通配符在前的，如*.test.com</li>
<li>在后的，如<a target="_blank" rel="noopener" href="http://www.test/">www.test</a>.*</li>
<li>正则匹配，如~^.www.test.com$</li>
<li>如果都不匹配<ol>
<li>优先选择listen配置项后有default或default_server的</li>
<li>找到匹配listen端口的第一个server块</li>
</ol>
</li>
</ol>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Misc/">Misc</a>
    </span>
    

    </div>

    
  </div>
</article>




<nav class="pagination">
  
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2023 q1angch0u
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>